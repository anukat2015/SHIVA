<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<link REL="SHORTCUT ICON" HREF="UVALogo.ico">
	<title>SHIVA Mixer</title>
 	<link rel="stylesheet" type="text/css" href="css/smoothness/jquery-ui-1.8.16.custom.css">
	<script type="text/javascript" src='//www.google.com/jsapi?autoload={"modules":[{"name":"visualization","version":"1"}]}'></script>
	<script type="text/javascript" src="seamixer.js"></script>
	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
	<style type="text/css">
		body { font-family:Verdana,Geneva,sans-serif; font-size:xx-small; }
	</style>
</head>
<body>
	<iframe id="timelineCon" style="position:absolute;top:35px;left:0px;width:90%;height:420px;border:none"></iframe>
	<iframe id="mapCon" style="position:absolute;top:460px;left:0px;width:90%;height:520px;border:none"></iframe>
	<input type="button" onclick="test()" value="test">
<script>

	var ondos=[{ on:"init",			Do:"load",   src:"e=263",  id:"timelineCon" },
		{ on:"init",				Do:"load",   src:"e=264",  id:"mapCon" },
		{ on:"init",				Do:"data",   src:"0AsMQEd_YoBWldHZNbGU2czNfa004UmpzeC13MkZZb0E",  id:"myData",  preload:"true" },
		{ on:"init", 				Do:"action", id:"mapCon", type:"ShivaActMap=hide", p1:"1" },
		{ on:"init",       			Do:"call",   id:"Callback", p1:"Hello", p2:" world" },
		{ on:"init",				Do:"data",   src:"0AohdE1_3ZElJdFRRaFk1TE1nUURzNkFsNm5DWV9DQ3c",  id:"markerData",  preload:"true" },


		{ on:"ShivaChart=data",  	Do:"query",  src:"myData", id:"mySubset", query:"Gold GT 150 AND Silver LT 150", sort:"Gold" },
		{ on:"timelineCon.time",  	Do:"fill",   src:"mySubset", id:"mapCon" },
		{ on:"ShivaMap=click",     	Do:"call",   id:"SetMap", script:"MyScript" }
		];
	
	var mix=new seaMixer();
	mix.Run(ondos);
	 
	function SetMap(lat, lon, zoom)
	{
//	     	...Do something in JavaScript...
		mix.data.myData[3][2]=(lat-39)*100
		mix.RunOnDo({ Do:"fill", id:"timelineCon", src:"myData" });     	    	
	}
	
	function MyScript(ondo)
	{
//	     	...Do something in JavaScript and modify undo params...
		return(ondo)
	}
	
	function test()
	{
		mix.data.myData[3][2]+=10
		mix.RunOnDo({ Do:"fill", id:"timelineCon", src:"myData", type:"Chart" });     	    	
		mix.RunOnDo({ Do:"fill", id:"mapCon", src:"markerData", type:"Map" });     	    	
//		mix.RunOnDo({ Do:"action", id:"mapCon", type:"ShivaActMap=marker",  p1:"1", p2:"false" });     	    	
	}
	
	function Callback(p1, p2, p3, p4)
	{
		trace(p1+" "+p2);
	}
	
	function trace(str) 
		{ 
			console.log(str) 
		}
		
	
</script>
</body></html>