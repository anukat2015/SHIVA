<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<link REL="SHORTCUT ICON" HREF="UVALogo.ico">
	<title>SHIVA Video</title>
 	<link rel="stylesheet" type="text/css" href="css/smoothness/jquery-ui-1.8.16.custom.css">
	<script type="text/javascript" src="shivalib-min.js"></script>
	<script type="text/javascript" src="SHIVA_Event.js"></script>
	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
	<style type="text/css">
		body { font-family:Verdana,Geneva,sans-serif; font-size:xx-small; }
		p.pb { text-align:right; color:#999999; }
		.rounded-corners { -moz-border-radius:8px;-webkit-border-radius:8px;-khtml-border-radius:8px;border-radius:8px;}
		tr.odd { background-color:#e0e0e0; }
		.propTable { background-color:#eee;border-radius:8px;
				  	 background:-moz-linear-gradient(top,#f0f0f0,#dfdfdf);
				  	 background:-webkit-linear-gradient(top, #f0f0f0 0%, #dfdfdf 100%);
				  	 border-collapse: collapse;
				  	 width:278px;
				  	 }
	</style>
</head>
<body>
	<div style="width:279px;position:absolute;top:0px;left:0px">
    <table id="propertyTable" class="propTable">
		<tr style='height:8px'><td> </td></tr>
	</table> 
		<p style="text-align:right">
			<img src='eventsbutton.gif' style='vertical-align:middle' alt='Event editor' onclick='shivaLib.ev.EventEditor()'>&nbsp;&nbsp;&nbsp;
			<img src='annotate.gif' style='vertical-align:bottom' alt='Annotate' onclick='shivaLib.Annotate()'>
			<span id='saveAsDiv'></span>
			<br/><br/><a onclick='ShowSample()'><i>Click <u>here</u> to load sample events</i></a>
	</p>		
 	<div id="helpDiv"></div>
	<p>&nbsp;</p><p>&nbsp;</p>
	<div id="outputDiv" style="width:460px"></div>
	</div>
	<div id="containerDiv" style="width:600px;height:400px;position:absolute;top:0px;left:308px"></div>

<script>

///////// GLOBALS   //////////

	var shivaLib=null;
	var shivaGroup="Video"
	var items=new Array();

	var props={
		dataSourceUrl: 				{	def:'zDZFcDGpL4U', 	opt:'string',			des:'Source of video'}, 
		start: 						{	def:'0:0', 			opt:'string',			des:'Starting time (m:s)'}, 
		end: 						{	def:'', 			opt:'string',			des:'Ending time (m:s)'}, 
		autoplay: 					{	def:'false', 		opt:'true|false',		des:'Auto-play?'}, 
		volume: 					{	def:'50', 			opt:'number',			des:'Audio volume'}, 
		height:		 				{	def:'366', 			opt:'number',		 	des:'Height of player'}, 
		width:	 					{	def:'600', 			opt:'number',		 	des:'Width of player'},
		duration:	 				{	def:'?', 			opt:'text',		 		des:'Duration of clip'},
		notes: 						{	def:'false', 		opt:'true|false',		des:'Enable note taking?'},
		ud: 						{	def:'false', 		opt:'true|false',		des:'Enable user draw?'}
		}
	
	var helpText=new Array();
	helpText['Source of video']="Click on the text box to the right and enter a value that sets the source video. <br /> For Youtube videos this is the unique ID YouTube assigns to the URL of a video. Click on the text box to the right to type or paste the jumble of random letters, such as this: zDZFcDGpL4U, extracted from this URL: http://www.youtube.com/watch?v=zDZFcDGpL4U.<br />For Vimeo videos the approach is similar. From a video with the web URL ‘http://vimeo.com/30581015’, copy and paste ‘30581015’ into the text box.";
	helpText['Starting time (m:s)']="Click on the text box to the right and enter a value that sets the starting time, in seconds, when the video will start playing.  For example, if you want the video to start at 1 minute and 45 seconds into the video type 1:45 into the text box.";
	helpText['Ending time (m:s)']="Click on the text box to the right and enter a value that sets the ending time, in seconds, when the video will stop playing. For example, if you want the video to end at 2 minute and 50 seconds into the video type 2:50 into the text box.";
	helpText['Auto-play?']="Use the drop-down menu to the right to choose whether or not the video will play automatically when the page is loaded.";
	helpText['Hide controls?']="Use the drop-down menu to the right to either show or hide the video player’s controls when embedded in a project.";
	helpText['Playlists']="You can string a number of videos together by typing their IDs here, separated by commas."
	helpText['Audio volume']="Click on the text box to the right and enter a value that determines the initial setting of the audio volume.  Enter a number from 0 to 100.";
	helpText['Loop playlists?']="If set to 'true', playlists will play in a continuous loop.";
	helpText['Height of player']="Click on the text box to the right and enter a value that sets the height of the video in pixels, including controls.  Use a number between 1 and 100000.";
	helpText['Duration of clip']="This text box provides a way to instantly see the duration of your video. The duration listed in the video player itself will not reflect your changes made via ‘Starting time’ and ‘Ending time’, whereas this text box will.";	
	helpText['Width of player']="Click on the text box to the right and enter a value that sets the width of the video in pixels, including controls.  Use a number between 1 and 100000.";	
	helpText['OVERVIEW']="This will allow you to specify a video clip from YouTube to play in an embedded player. The start and ending times can be specified.<br/><br/>";
	helpText['OVERVIEW']+="Want to add text, line drawings, circles or pictures to your project?  Just click on the grey colored pencil in a circle button below the attributes box and to activate the SHIVA drawing tool.<br/><br/>";
	helpText['OVERVIEW']+="For more information and detailed instructions for utilizing this tool please visit the UVa Knowledge Base documentation for the <a href='https://wiki.shanti.virginia.edu/x/upy1AQ' target='_blank'> Videos Tool</a>."
	helpText['Enable note taking?']="Take notes while the video is viewed?";
	helpText['Enable user draw?']="Use the drop-down menu to the right to toggle whether or not users can interactively draw on your visualization. Note these drawings are for users only and are not saved with the visualization. In order to draw users will need to click on the pencil icon in the bottom left of your visualization.";
	
///////// INIT  /////////////

	$(document).ready(function() {
		shivaLib=new SHIVA_Show("containerDiv",[{shivaGroup:"Video"}]);
		shivaLib.drupalMan=(""+window.location).match(/pr=d/);
	  	SetAttributes(props);
		ReEdit();
		ShowHelp("startup");
		if (window.addEventListener) 
			window.addEventListener("message",shivaEventHandler,false);
		else
			window.attachEvent("message",shivaEventHandler);
		if (!shivaLib.drupalMan) {
			var str="&nbsp;&nbsp;Share as: <select id='formatter' onChange='SaveData(this.value)'>";
			str+="<option>Choose format</option>";
			str+="<option>WordPress</option>";
			str+="<option>eStore</option>";
			str+="<option>iFrame</option>";
			str+="<option>JSON</option>";
			str+="<option>Web-page</option>";
			str+="</select>"; 
			$("#saveAsDiv").html(str);
			}
	});

	function shivaEventHandler(e)
	{
		if (e.data.indexOf("GetJSON") == 0) 
			e.source.postMessage("GetJSON="+SaveData("GetJSON"),"*");
		else if (e.data.indexOf("GetWebPage") == 0) 
			e.source.postMessage("GetWebPage="+SaveData("Web-page"),"*");
		else if (e.data.indexOf("GetWordPress") == 0) 
			e.source.postMessage("GetWordPress="+SaveData("WordPress"),"*");
		else if (e.data.indexOf("GetType") == 0) 
			e.source.postMessage("GetType="+shivaGroup,"*");
		else if (e.data.indexOf("PutJSON") == 0)
			ReEdit($.parseJSON(e.data.substr(8)));
	}
 
	function Draw(mode)
	{	
		if (shivaLib.drupalMan) 
			window.parent.postMessage("DataChanged=true","*");
		shivaLib.Draw($.parseJSON(SaveData("GetJSON")));
	}

	function SaveData(mode)
	{
		var re=/id="kaltura_([^"]+)"/;
		var v=re.exec($("#propInput0").val());
		if (v)	
			$("#propInput0").val("kaltura_"+v[1])
		return shivaLib.SaveData(mode,shivaGroup,null,props);
	}	

	function ReEdit(jsonData)
	{
		shivaLib.ReEdit(jsonData,props);
		Draw();
	}	

	function ShowHelp(att)
	{
		if (shivaLib.player){
			if (shivaLib.VideoDuration()) {
				var str=Math.floor(shivaLib.player.duration()/60)+":";
				str+=Math.ceil(shivaLib.VideoDuration()%60);	
				$("#propInput7").val(str);
				}
			}
		if (att == "startup") 
			$("#helpDiv").html("<br/><p class='pb'>Powered by YouTube&trade;<br/><br/>Built by SHANTI<br/>The University of Virginia</p>");
		else
			shivaLib.ShowHelp(att,helpText);
	}	

	function ShowSample()
	{
		var data={
			"shivaEvents": [{"type":"popup","start":"00:05","fadein":"2","title":"This is a popup box","text":"This is <i>HTML formatted</i> text within a light grey box that faded in over 1 second, is draggable and has an icon.","url":"http://www.viseyes.org/shiva/icons/blue/book_alt2_16x14.png","frame":{"draggable":"true","width":"150","left":"70%","closer":"true"	}},
			{"type":"image","start":"00:10","end":"00:15","click":"http://www.viseyes.org","fadein":"2","fadeout":"2","title":"75% opacity -- Click to go to viseyes.org","url":"http://www.viseyes.org/shiva/map.jpg","frame":{"width":"300","top":"50","left":"100","opacity":"75%"	}},
			{"type":"image","start":"00:15","end":"00:24","fadein":"1","fadeout":"2","hover":"mypop","click":"play()","title":"Video pauses<br>Hover over me, then click","player":"pause","url":"http://www.primaryaccess.org/test.jpg","frame":{"width":"120","top":"20","left":"70%","color":"red"	}},
			{"type":"iframe","start":"00:25","end":"00:34","url":"http://www.primaryaccess.org","frame":{"border":"1","width":"600","left":"620","height":"600"	}},
			{"type":"menu","start":"00:35","title":"A quick quiz","done":"play()","url":"http://www.viseyes.org/shiva/icons/blue/question_mark_8x16.png","frame":{"left":"8","top":"60","width":"300","draggable":"true","scroller":"false","closer":"false","height":"auto","radius":"8","color":"black","background-color":"","border":"1px solid","opacity":"100"	},"text":"When did Christopher Columbus sail to America? Hint:He sailed the ocean blue in...*!!*>>1942|popup(In the middle of WW2?)*!!*>>1493|popup(Close, but no cigar)*!!*>>1492|*popup(Yes! Columbus sailed the ocean blue in 1492)","player":"pause","id":"","end":"","fadein":"","fadeout":"","hover":"","click":"","response":""},
			{"type":"ask","start":"00:40","title":"Tell me about it","done":"play()","url":"http://www.viseyes.org/shiva/icons/blue/comment_stroke_16x14.png","text":"Find a scene that you think this scene reflects good instructional practice, and write a paragraph or two that describes what you saw","frame":{"left":"200","top":"60","width":"300","draggable":"true"	},"player":"pause"},
			{"type":"find","start":"00:45","title":"Show me when","done":"play(4:55)","url":"http://www.viseyes.org/shiva/icons/blue/play_9x12.png","text":"Find a scene that you think this scene reflects good student-teacher interaction. Hint:It is around 3:00>>3:00--15|popup(That's a good one!)|popup(That's not one I picked)","frame":{"left":"200","top":"60","width":"300","draggable":"true"	},"player":"pause"},
			{"type":"find","start":"05:00","title":"Show me where","done":"play(5:00)","url":"http://www.viseyes.org/shiva/icons/blue/pin_12x12.png","text":"Click on the pie chart in the video Hint:It is on the blackboard>>380-100-50|popup(You found it!)|popup(That's not it...)","frame":{"left":"450","top":"80","width":"300","draggable":"true"	},"player":"pause"},
			{"type":"popup","start":"05:05","end":"05:10","fadein":"1","title":"Is he pursuasive?","text":"Drag the poller up or down to rate how he's doing in this section of the video.","url":"http://www.viseyes.org/shiva/icons/blue/bars_12x12.png","frame":{"draggable":"true","width":"150","left":"65%","top":"20%","closer":"true"	}},
			{"type":"poller","start":"005:05","end":"05:25","fadeout":"2","title":"Rate this!","frame":{"width":"auto","top":"10%" }},
			{"type":"popup","id":"mypop","title":"This goes away after mouse is out","url":"http://www.viseyes.org/shiva/icons/red/camera_12x12.png","frame":{"top":"60","left":"220"	}}],
			"dataSourceUrl": "zDZFcDGpL4U",
			"start": "0:0",
			"end": "",
			"autoplay": "false",
			"volume": "50",
			"height": "366",
			"width": "600",
			"duration": "0:0",
			"ud": "false",
			"shivaMod": "Wed, 05 Sep 2012",
			"shivaGroup": "Video"
			}
		ReEdit(data);
		shivaLib.Sound("ding");
		shivaLib.ev.EventEditor();
	}

	function SetAttributes()
	{
		shivaLib.SetAttributes(props);
	}	

	
</script>
</body></html>